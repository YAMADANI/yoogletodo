(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{2934:(e,t,s)=>{Promise.resolve().then(s.bind(s,4945))},4945:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var a=s(5155),o=s(2115);let n=e=>{let{todos:t,onDelete:s}=e;return(0,a.jsx)("ul",{className:"space-y-4",children:t.map(e=>(0,a.jsxs)("li",{className:"flex flex-row items-center justify-between p-3 border-l-5 border-teal-500 rounded shadow",children:[(0,a.jsx)("span",{className:"text-2xl",children:e.content}),(0,a.jsx)("button",{onClick:()=>s(e.id),children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-10 h-10 text-black bg-gray-100 rounded shadow hover:shadow-none duration-150",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M6.225 4.811a1 1 0 011.414 0L12 9.172l4.361-4.361a1 1 0 111.414 1.414L13.414 10.586l4.361 4.361a1 1 0 01-1.414 1.414L12 12l-4.361 4.361a1 1 0 11-1.414-1.414l4.361-4.361-4.361-4.361a1 1 0 010-1.414z",clipRule:"evenodd"})})})]},e.id))})};var i=s(8809),l=s(1432);let r=e=>{let{onAdd:t}=e,[s,n]=(0,o.useState)("");return(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),s.trim()&&(t(s),n(""))},className:"flex flex-row space-x-2",children:[(0,a.jsx)(i.p,{type:"text",value:s,onChange:e=>n(e.target.value),className:"flex-grow border border-gray-600 rounded-sm focus:outline focus:outline-gray-800"}),(0,a.jsx)(l.$,{type:"submit",className:"bg-teal-400 rounded-full px-4 py-2 transform hover:bg-teal-300 duration-150",children:"追加"})]})};function c(){let[e,t]=(0,o.useState)([]),[s,i]=(0,o.useState)(new Map);(0,o.useEffect)(()=>{"default"===Notification.permission&&Notification.requestPermission();let a=sessionStorage.getItem("todos"),o=sessionStorage.getItem("notificationTimers");if(a){let e=JSON.parse(a);t(e),e.forEach(e=>{let t=Date.now();t>=e.time+6e4?c(e):setTimeout(()=>c(e),e.time+6e4-t)})}if(o){let t=JSON.parse(o);Object.keys(t).forEach(s=>{t[s]&&c(e.find(e=>e.id===s))})}return()=>{s.forEach(e=>clearTimeout(e)),s.forEach(e=>clearInterval(e))}},[]);let l=e=>{let t=Date.now();setTimeout(()=>{c(e)},Math.max(0,e.time+6e4-t))},c=e=>{if("granted"!==Notification.permission)return;new Notification("YoogleToDo：".concat(e.content),{body:"\uD83D\uDCE2  やれ！早くやれ！！",icon:"/icon.svg"}),s.has(e.id)&&clearInterval(s.get(e.id));let t=setInterval(()=>{new Notification("YoogleToDo：".concat(e.content),{body:"\uD83D\uDCA2 まだやっとらんのか？ いい加減しろ！！",icon:"/icon.svg"})},1e4),a=new Map(s);a.set(e.id,t),i(a);let o=JSON.parse(sessionStorage.getItem("notificationTimers")||"{}");o[e.id]=!0,sessionStorage.setItem("notificationTimers",JSON.stringify(o))},d=e=>{if(s.has(e)){clearTimeout(s.get(e)),clearInterval(s.get(e));let t=new Map(s);t.delete(e),i(t)}};return(0,a.jsxs)("main",{className:"flex flex-col justify-center items-center h-screen bg-gray-100",children:[(0,a.jsxs)("h1",{className:"text-6xl font-bold font-krona-one",children:[(0,a.jsx)("span",{className:"text-violet-600",children:"Y"}),(0,a.jsx)("span",{className:"text-red-500",children:"o"}),(0,a.jsx)("span",{className:"text-yellow-300",children:"o"}),(0,a.jsx)("span",{className:"text-blue-500",children:"g"}),(0,a.jsx)("span",{className:"text-green-600",children:"l"}),(0,a.jsx)("span",{className:"text-red-500",children:"e"}),(0,a.jsx)("span",{className:"text-sky-500",children:"To"}),(0,a.jsx)("span",{className:"text-slate-500 text-7xl",children:"Do"})]}),(0,a.jsx)("div",{className:"w-full mt-5 max-w-xl",children:(0,a.jsxs)("div",{className:"w-full px-8 py-5 space-y-6 bg-white shadow-md rounded-xl",children:[(0,a.jsx)(r,{onAdd:s=>{let a={id:crypto.randomUUID(),time:Date.now(),content:s},o=[...e,a];t(o),sessionStorage.setItem("todos",JSON.stringify(o)),l(a)}}),(0,a.jsx)(n,{todos:e,onDelete:s=>{d(s);let a=e.filter(e=>e.id!==s);t(a),sessionStorage.setItem("todos",JSON.stringify(a));let o=JSON.parse(sessionStorage.getItem("notificationTimers")||"{}");delete o[s],sessionStorage.setItem("notificationTimers",JSON.stringify(o))}})]})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[326,441,684,358],()=>t(2934)),_N_E=e.O()}]);